<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <title>Dashboard - Overview</title>
    <meta charset="utf-8">
    <meta content="ie=edge" http-equiv="x-ua-compatible">
    <meta content="Dashboard Overview" name="keywords">
    <meta content="Tamerlan Soziev" name="author">
    <meta content="Company expense " name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <link href="favicon.png" rel="shortcut icon">
    <link href="apple-touch-icon.png" rel="apple-touch-icon">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500" rel="stylesheet" type="text/css">
    <link href="{% static "css/main.css" %}" rel="stylesheet">
    <link href="{% static "css/side.css" %}" rel="stylesheet">
    <link href="{% static "icon_fonts_assets/picons-thin/style.css" %}" rel="stylesheet">
  </head>
  <body class="menu-position-side menu-side-left full-screen">
    

      <h1 style="text-align: center; background-color: #FFEB3B">HALOGEN PANIC SIMULATOR.</h1>

<hr>
      <div style="display: flex; justify-content: center;">
          <button style="display:flex; justify-content: center;" class="btn btn-success btn-lg" onclick="getLocation()">PANIC NOW</button>
            
          <p id="demo"></p>
      </div>
      <hr>
      
      <script>
      host = 'http://192.168.43.118:8000/'
      var x = document.getElementById("demo");
      
      function getLocation() {
          if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition);
          } else { 
              x.innerHTML = "Geolocation is not supported by this browser.";
          }
      }
      
      function showPosition(position) {
          x.innerHTML = "Latitude: " + position.coords.latitude + 
          "<br>Longitude: " + position.coords.longitude;
          coord = `{ "name":"John","location":"19 Niger crescent, amadu belo way", "lat":${position.coords.latitude}, "lng": ${position.coords.longitude} }`
            $.ajax({
          type: "POST",
          url: host + "end",
          data: JSON.parse(coord),
                async: true,
          success: function(res) {
              console.log(res)
          },
          error: function(){
            1
          }
          })
        }
      </script>

      <div class="display-type"></div>
    </div>
    <script src="{% static "js/jquery.js" %}"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-XXXXXXXX-9', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>